{
  "info": {
    "name": "MealPrep API Collection",
    "description": "Comprehensive API collection for the MealPrep AI-powered meal planning application covering all endpoints with authentication, error handling, and testing scenarios.",
    "version": "1.3.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://api.mealprep.com",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "familyId",
      "value": "",
      "type": "string"
    },
    {
      "key": "recipeId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"confirmPassword\": \"SecurePassword123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"acceptTerms\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": [
            {
              "name": "Successful Registration",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"confirmPassword\": \"SecurePassword123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"acceptTerms\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/auth/register",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "auth", "register"]
                }
              },
              "status": "Created",
              "code": 201,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"message\": \"Registration successful. Please check your email to verify your account.\",\n  \"userId\": \"123e4567-e89b-12d3-a456-426614174000\"\n}"
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.refreshToken);",
                  "    pm.environment.set('userId', responseJson.user.id);",
                  "    ",
                  "    pm.test('Login successful', function () {",
                  "        pm.expect(responseJson.accessToken).to.not.be.undefined;",
                  "        pm.expect(responseJson.user.email).to.not.be.undefined;",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": [
            {
              "name": "Successful Login",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"rememberMe\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/auth/login",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "auth", "login"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refreshToken\": \"def50200e8b8a7f...\",\n  \"expiresIn\": 3600,\n  \"user\": {\n    \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    \"email\": \"john.doe@example.com\",\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"isEmailVerified\": true,\n    \"createdAt\": \"2024-01-15T10:30:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.refreshToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "refresh"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Recipes",
      "description": "Recipe management and CRUD operations",
      "item": [
        {
          "name": "Get All Recipes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/recipes?page=1&limit=20&sortBy=createdAt&sortOrder=desc",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            }
          }
        },
        {
          "name": "Get Recipe by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Recipe retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.id).to.not.be.undefined;",
                  "    pm.expect(responseJson.name).to.not.be.undefined;",
                  "    pm.expect(responseJson.ingredients).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/recipes/{{recipeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes", "{{recipeId}}"]
            }
          }
        },
        {
          "name": "Create Recipe",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('recipeId', responseJson.id);",
                  "    ",
                  "    pm.test('Recipe created successfully', function () {",
                  "        pm.expect(responseJson.id).to.not.be.undefined;",
                  "        pm.expect(responseJson.name).to.equal('Chicken Parmesan');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Chicken Parmesan\",\n  \"description\": \"Classic Italian-American dish with breaded chicken, marinara sauce, and melted cheese\",\n  \"prepTimeMinutes\": 20,\n  \"cookTimeMinutes\": 25,\n  \"servings\": 4,\n  \"difficulty\": \"Medium\",\n  \"cuisine\": \"Italian\",\n  \"ingredients\": [\n    {\n      \"name\": \"Chicken breast\",\n      \"quantity\": 4,\n      \"unit\": \"pieces\",\n      \"notes\": \"Pounded thin\"\n    },\n    {\n      \"name\": \"Breadcrumbs\",\n      \"quantity\": 2,\n      \"unit\": \"cups\",\n      \"notes\": \"Italian seasoned\"\n    },\n    {\n      \"name\": \"Marinara sauce\",\n      \"quantity\": 2,\n      \"unit\": \"cups\"\n    },\n    {\n      \"name\": \"Mozzarella cheese\",\n      \"quantity\": 2,\n      \"unit\": \"cups\",\n      \"notes\": \"Shredded\"\n    }\n  ],\n  \"instructions\": [\n    \"Preheat oven to 425°F (220°C)\",\n    \"Bread the chicken breasts with seasoned breadcrumbs\",\n    \"Pan-fry chicken until golden brown on both sides\",\n    \"Top with marinara sauce and mozzarella cheese\",\n    \"Bake for 15-20 minutes until cheese is melted and bubbly\",\n    \"Serve hot with pasta or salad\"\n  ],\n  \"tags\": [\"dinner\", \"italian\", \"comfort-food\"],\n  \"nutritionInfo\": {\n    \"calories\": 520,\n    \"protein\": 45,\n    \"carbohydrates\": 25,\n    \"fat\": 22,\n    \"fiber\": 3,\n    \"sugar\": 8\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/recipes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes"]
            }
          }
        },
        {
          "name": "Update Recipe",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Chicken Parmesan Deluxe\",\n  \"description\": \"Enhanced classic Italian-American dish with premium ingredients\",\n  \"prepTimeMinutes\": 25,\n  \"cookTimeMinutes\": 30,\n  \"servings\": 4,\n  \"difficulty\": \"Medium\",\n  \"cuisine\": \"Italian\",\n  \"tags\": [\"dinner\", \"italian\", \"comfort-food\", \"premium\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/recipes/{{recipeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes", "{{recipeId}}"]
            }
          }
        },
        {
          "name": "Delete Recipe",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/recipes/{{recipeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes", "{{recipeId}}"]
            }
          }
        },
        {
          "name": "Search Recipes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/recipes/search?q=chicken&cuisine=italian&maxPrepTime=30&difficulty=medium&tags=dinner&page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "chicken"
                },
                {
                  "key": "cuisine",
                  "value": "italian"
                },
                {
                  "key": "maxPrepTime",
                  "value": "30"
                },
                {
                  "key": "difficulty",
                  "value": "medium"
                },
                {
                  "key": "tags",
                  "value": "dinner"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Family Management",
      "description": "Family member and household management",
      "item": [
        {
          "name": "Get Family Members",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/family/members",
              "host": ["{{baseUrl}}"],
              "path": ["api", "family", "members"]
            }
          }
        },
        {
          "name": "Add Family Member",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('familyMemberId', responseJson.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Emily Doe\",\n  \"relationship\": \"spouse\",\n  \"dateOfBirth\": \"1985-03-15\",\n  \"dietaryRestrictions\": [\"vegetarian\"],\n  \"allergies\": [\"nuts\"],\n  \"dislikedIngredients\": [\"mushrooms\", \"olives\"],\n  \"favoriteIngredients\": [\"cheese\", \"pasta\", \"tomatoes\"],\n  \"favoriteCuisines\": [\"Italian\", \"Mediterranean\"],\n  \"spicePreference\": \"mild\",\n  \"cookingSkillLevel\": \"intermediate\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/family/members",
              "host": ["{{baseUrl}}"],
              "path": ["api", "family", "members"]
            }
          }
        },
        {
          "name": "Update Family Member",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Emily Doe\",\n  \"relationship\": \"spouse\",\n  \"dietaryRestrictions\": [\"vegetarian\", \"gluten-free\"],\n  \"allergies\": [\"nuts\", \"shellfish\"],\n  \"spicePreference\": \"medium\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/family/members/{{familyMemberId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "family", "members", "{{familyMemberId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Suggestions",
      "description": "AI-powered meal suggestions and recommendations",
      "item": [
        {
          "name": "Generate Meal Suggestions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('AI suggestions generated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.suggestions).to.be.an('array');",
                  "    pm.expect(responseJson.suggestions.length).to.be.greaterThan(0);",
                  "    ",
                  "    responseJson.suggestions.forEach(suggestion => {",
                  "        pm.expect(suggestion.familyFitScore).to.be.a('number');",
                  "        pm.expect(suggestion.familyFitScore).to.be.within(0, 10);",
                  "        pm.expect(suggestion.recipeName).to.not.be.undefined;",
                  "    });",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"familyId\": \"{{familyId}}\",\n  \"mealType\": \"dinner\",\n  \"cuisinePreferences\": [\"Italian\", \"Mediterranean\"],\n  \"dietaryRestrictions\": [\"vegetarian\"],\n  \"maxPrepTime\": 45,\n  \"difficulty\": \"medium\",\n  \"budget\": 25.00,\n  \"ingredients\": [\"chicken\", \"pasta\", \"cheese\"],\n  \"excludeIngredients\": [\"mushrooms\", \"olives\"],\n  \"numberOfSuggestions\": 5,\n  \"includeNutrition\": true,\n  \"includeCostEstimate\": true,\n  \"customRequests\": \"Something healthy and kid-friendly\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/suggestions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "suggestions"]
            }
          },
          "response": [
            {
              "name": "Successful AI Suggestions",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"familyId\": \"{{familyId}}\",\n  \"mealType\": \"dinner\",\n  \"cuisinePreferences\": [\"Italian\", \"Mediterranean\"],\n  \"dietaryRestrictions\": [\"vegetarian\"],\n  \"maxPrepTime\": 45,\n  \"difficulty\": \"medium\",\n  \"budget\": 25.00,\n  \"numberOfSuggestions\": 5\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/ai/suggestions",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "ai", "suggestions"]
                }
              },
              "status": "OK",
              "code": 200,
              "body": "{\n  \"suggestions\": [\n    {\n      \"recipeId\": \"rec_001\",\n      \"recipeName\": \"Vegetarian Pasta Primavera\",\n      \"description\": \"Fresh vegetables and pasta in a light cream sauce\",\n      \"prepTimeMinutes\": 20,\n      \"cookTimeMinutes\": 25,\n      \"servings\": 4,\n      \"familyFitScore\": 9.2,\n      \"confidenceScore\": 0.92,\n      \"reasoningText\": \"High family fit due to vegetarian requirements, Italian cuisine preference, and kid-friendly ingredients\",\n      \"estimatedCost\": 18.50,\n      \"nutritionInfo\": {\n        \"calories\": 420,\n        \"protein\": 15,\n        \"carbohydrates\": 52,\n        \"fat\": 18\n      },\n      \"personalization\": {\n        \"matchedPreferences\": [\"Italian cuisine\", \"vegetarian\", \"kid-friendly\"],\n        \"avoidedRestrictions\": [\"mushrooms\", \"olives\"],\n        \"familyMemberScores\": {\n          \"adult1\": 9.5,\n          \"adult2\": 8.8,\n          \"child1\": 9.3\n        }\n      }\n    }\n  ],\n  \"metadata\": {\n    \"generationTime\": \"2024-01-15T14:30:00Z\",\n    \"modelVersion\": \"gemini-1.5-pro\",\n    \"personaVersion\": \"v2.1\",\n    \"requestId\": \"req_12345\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get AI Suggestion History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ai/suggestions/history?page=1&limit=20&dateFrom=2024-01-01&dateTo=2024-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "suggestions", "history"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "dateFrom",
                  "value": "2024-01-01"
                },
                {
                  "key": "dateTo",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Rate AI Suggestion",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"suggestionId\": \"sug_12345\",\n  \"rating\": 4.5,\n  \"feedback\": \"Great suggestion! The family loved it. Could use a bit more seasoning.\",\n  \"wouldMakeAgain\": true,\n  \"actualCookTime\": 28,\n  \"actualCost\": 19.25\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/suggestions/{{suggestionId}}/rate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "suggestions", "{{suggestionId}}", "rate"]
            }
          }
        }
      ]
    },
    {
      "name": "Menu Planning",
      "description": "Weekly and daily menu planning features",
      "item": [
        {
          "name": "Get Weekly Menu",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/menu/weekly?weekStartDate=2024-01-15",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu", "weekly"],
              "query": [
                {
                  "key": "weekStartDate",
                  "value": "2024-01-15"
                }
              ]
            }
          }
        },
        {
          "name": "Create Weekly Menu",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"weekStartDate\": \"2024-01-15\",\n  \"meals\": [\n    {\n      \"date\": \"2024-01-15\",\n      \"mealType\": \"breakfast\",\n      \"recipeId\": \"rec_001\",\n      \"notes\": \"Make extra for leftovers\"\n    },\n    {\n      \"date\": \"2024-01-15\",\n      \"mealType\": \"lunch\",\n      \"recipeId\": \"rec_002\"\n    },\n    {\n      \"date\": \"2024-01-15\",\n      \"mealType\": \"dinner\",\n      \"recipeId\": \"rec_003\",\n      \"servings\": 6\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/menu/weekly",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu", "weekly"]
            }
          }
        },
        {
          "name": "Update Meal in Menu",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recipeId\": \"rec_004\",\n  \"servings\": 4,\n  \"notes\": \"Updated recipe based on family feedback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/menu/meals/{{mealId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu", "meals", "{{mealId}}"]
            }
          }
        },
        {
          "name": "Generate Shopping List",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"weekStartDate\": \"2024-01-15\",\n  \"includeQuantities\": true,\n  \"groupByCategory\": true,\n  \"excludeOnHand\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/menu/shopping-list",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu", "shopping-list"]
            }
          }
        }
      ]
    },
    {
      "name": "Ingredients",
      "description": "Ingredient management and inventory",
      "item": [
        {
          "name": "Search Ingredients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ingredients/search?q=tomato&category=vegetables&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ingredients", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "tomato"
                },
                {
                  "key": "category",
                  "value": "vegetables"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Ingredient Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ingredients/{{ingredientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ingredients", "{{ingredientId}}"]
            }
          }
        },
        {
          "name": "Get Pantry Inventory",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ingredients/pantry",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ingredients", "pantry"]
            }
          }
        },
        {
          "name": "Update Pantry Item",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ingredientId\": \"ing_001\",\n  \"quantity\": 2.5,\n  \"unit\": \"lbs\",\n  \"expirationDate\": \"2024-01-25\",\n  \"location\": \"refrigerator\",\n  \"notes\": \"Organic tomatoes from farmer's market\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ingredients/pantry/{{pantryItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ingredients", "pantry", "{{pantryItemId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Health & Monitoring",
      "description": "API health checks and system monitoring",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API is healthy', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.status).to.equal('healthy');",
                  "    pm.expect(responseJson.timestamp).to.not.be.undefined;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Ready Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/ready",
              "host": ["{{baseUrl}}"],
              "path": ["health", "ready"]
            }
          }
        },
        {
          "name": "Live Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/live",
              "host": ["{{baseUrl}}"],
              "path": ["health", "live"]
            }
          }
        }
      ]
    },
    {
      "name": "Error Scenarios",
      "description": "Test error handling and edge cases",
      "item": [
        {
          "name": "Unauthorized Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Unauthorized access properly handled', function () {",
                  "    pm.response.to.have.status(401);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.error).to.equal('Unauthorized');",
                  "    pm.expect(responseJson.message).to.not.be.undefined;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/recipes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes"]
            }
          }
        },
        {
          "name": "Invalid Recipe Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Validation errors properly handled', function () {",
                  "    pm.response.to.have.status(400);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.error).to.equal('ValidationError');",
                  "    pm.expect(responseJson.validationErrors).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"prepTimeMinutes\": -5,\n  \"servings\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/recipes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "recipes"]
            }
          }
        },
        {
          "name": "Rate Limit Exceeded",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Rate limiting properly enforced', function () {",
                  "    pm.response.to.have.status(429);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.error).to.equal('RateLimitExceeded');",
                  "    ",
                  "    // Check rate limit headers",
                  "    pm.expect(pm.response.headers.get('X-RateLimit-Limit')).to.not.be.undefined;",
                  "    pm.expect(pm.response.headers.get('X-RateLimit-Remaining')).to.not.be.undefined;",
                  "    pm.expect(pm.response.headers.get('X-RateLimit-Reset')).to.not.be.undefined;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"familyId\": \"{{familyId}}\",\n  \"mealType\": \"dinner\",\n  \"numberOfSuggestions\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/suggestions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "suggestions"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-refresh token if expired",
          "const accessToken = pm.environment.get('accessToken');",
          "const refreshToken = pm.environment.get('refreshToken');",
          "",
          "if (accessToken && refreshToken) {",
          "    try {",
          "        const tokenPayload = JSON.parse(atob(accessToken.split('.')[1]));",
          "        const currentTime = Math.floor(Date.now() / 1000);",
          "        ",
          "        // Refresh token if it expires in the next 5 minutes",
          "        if (tokenPayload.exp && (tokenPayload.exp - currentTime) < 300) {",
          "            pm.sendRequest({",
          "                url: pm.environment.get('baseUrl') + '/api/auth/refresh',",
          "                method: 'POST',",
          "                header: {",
          "                    'Content-Type': 'application/json'",
          "                },",
          "                body: {",
          "                    mode: 'raw',",
          "                    raw: JSON.stringify({ refreshToken: refreshToken })",
          "                }",
          "            }, function (err, response) {",
          "                if (!err && response.code === 200) {",
          "                    const responseJson = response.json();",
          "                    pm.environment.set('accessToken', responseJson.accessToken);",
          "                    pm.environment.set('refreshToken', responseJson.refreshToken);",
          "                }",
          "            });",
          "        }",
          "    } catch (e) {",
          "        console.log('Error parsing token:', e);",
          "    }",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test for response time",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Global test for content type",
          "if (pm.response.code !== 204) {",
          "    pm.test('Response has correct content type', function () {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    });",
          "}",
          "",
          "// Global test for security headers",
          "pm.test('Security headers are present', function () {",
          "    pm.expect(pm.response.headers.get('X-Content-Type-Options')).to.equal('nosniff');",
          "    pm.expect(pm.response.headers.get('X-Frame-Options')).to.not.be.undefined;",
          "    pm.expect(pm.response.headers.get('X-XSS-Protection')).to.not.be.undefined;",
          "});"
        ]
      }
    }
  ]
}